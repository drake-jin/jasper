<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>(스터디) 도커.araboza - 1</title>
    <meta name="description" content="데이터공작소 - 데이터 분석은 잘 못하지만, 데이터 분석할 수 있게 도와드리겠어요!" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- [[! highlight.js ]] -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="데이터공작소" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="데이터공작소" />
    <meta property="og:description" content="데이터 분석은 잘 못하지만, 데이터 분석할 수 있게 도와드리겠어요!" />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="데이터공작소" />
    <meta name="twitter:description" content="데이터 분석은 잘 못하지만, 데이터 분석할 수 있게 도와드리겠어요!" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image:src" content="/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Finding The Way Home",
    "url": "/",
    "image": "/assets/images/cover1.jpg",
    "description": "데이터 분석은 잘 못하지만, 데이터 분석할 수 있게 도와드리겠어요!"
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="데이터공작소" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <li class="nav-about " role="presentation"><a href="/about">About</a></li>
        <li class="nav-fables " role="presentation"><a href="/tag/fables">Fables</a></li>
        <li class="nav-speeches " role="presentation"><a href="/tag/speeches">Speeches</a></li>
        <li class="nav-fiction " role="presentation"><a href="/tag/fiction">Fiction</a></li>
        <li class="nav-author " role="presentation"><a href="/author/casper">Author</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->



<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
        
    </nav>
</header>

<main class="content" role="main">

    <article class="">

        <header class="post-header">
            <h1 class="post-title">(스터디) 도커.araboza - 1</h1>
            <section class="post-meta">
            <!-- <a href='/'>drakejin</a> -->
            <time class="post-date" datetime="2017-04-04">04 Apr 2017</time>
                <!-- [[tags prefix=" on "]] -->
                 
                on 
                
                    
                       <a href='/tag/docker'>Docker</a>,
                       
                
                    
                       <a href='/tag/virtualization'>Virtualization</a>,
                       
                
                    
                       <a href='/tag/container'>Container</a>,
                       
                
                    
                       <a href='/tag/Immutable Infrastructure'>Immutable infrastructure</a>,
                       
                
                    
                       <a href='/tag/pyrasis'>Pyrasis</a>
                       
                
                
            </section>
        </header>

        <section class="post-content">
            
            <p>[데이터 공작소] 데이터 공작소는 도커는 어떻게 공부할것인가! 처음 시작하는 도커에 대해 공부를 시작합니다. 이 문서의 저작권은 <img src="http://pyrasis.com/private/2014/11/30/publish-docker-for-the-really-impatient-book" alt="pyrasis.com" /> 여기에 있습니다. 혼자 공부하려고 글들의 내용을 참고하였습니다. 문제시 삭제하겠습니다.</p>

<h1 id="section">컨테이너의 필요성</h1>

<ul>
  <li>클라우드환경에서 서버는 클릭 몇번으로 만들어 내지만 서버의 환경(설치해야하는 각종 DB 등등..) 을 클릭으로 만들어 낼 수 없었다.</li>
  <li>환경은 OS가 무엇이냐에 따라 설치방법이 달라지고.. 새로 구매한 서버에서 운영환경을 만드는것은 고된 작업중 하나..</li>
  <li>셸 스크립트로 만들어내는것에도 한계가 있다. 셸 스크립트로 중앙 관리 기능이나 복잡한 관리 기능 구현은 힘듦.</li>
  <li>관리해야할 서비스 프로그램이 많아지고.. 설정도 복잡해지고…</li>
  <li>그리고 배포 및 관리를 하는대 서버를 통째로 이미지로 만들어서 올리는것이 좀 더 편리해서 서버를 통째로 샀다가 지우는 경우가 생김</li>
  <li>그러므로 이미지 기반 어플리케이션 배포 패러다임이 등장 (Immutable-infrastructure)</li>
</ul>

<h4 id="immutable-infrastructure-httpblognacyotcomarticles2014-04-06-immutable-infrastructure"><img src="http://blog.nacyot.com/articles/2014-04-06-immutable-infrastructure/" alt="Immutable Infrastructure 패러다임" /></h4>
<ul>
  <li>이미지 기반 어플리케이션 배포 패러다임</li>
  <li>한 번 설정하고 변경하지 않는 이미지 기반의 어플리케이션 배포 패러다임을 뜻함.</li>
  <li>다수의 서버를 동적으로 관리하는 클라우드를 기반으로 효과적이고 유연하게 배포할 수 있을까에 시작함</li>
  <li>기존에 서버를 지속적으로 관리 하는것에 벗어나 어떻게 해야 서버를 잘 쓰고 버리는지가 관건인 패러다임.</li>
  <li>Heroku, Travis에서 이 페러다임을 적극 채용하고 있으며 docker와 serf 같은 도구들은 이 패러다임의 적용을 돕는다.</li>
  <li>호스트 OS와 서비스 운영환경(소스코드, 프로그램, 컴파일된 바이너리)를 분리하고, 한 번 설정한 운영 환경은 변경하지 않음</li>
</ul>

<h4 id="immutable-infrastructure-">Immutable-infrastructure 장점</h4>
<ul>
  <li>관리 용이 : 서비스 운영환경을 이미지로 생성했기 때문에 이미지만 관리하면 됨, docker에서 이미지를 중앙관리 할 것임.</li>
  <li>확장성 : 이미지 하나로 서버를 계속 만들어 낼 수 있다. 클라우드 플랫폼의 자동확장 시능과 함께라면 손쉽게 확장할 수 있다.</li>
  <li>테스트 : 개발자의 PC나 테스트 서버에서 이미지를 실행하기만 하면 서비스 운영 환경과 동일한 환경이 구성되기 때문에 테스트가 쉽다.</li>
  <li>가볍다 : OS에 딸려있는 쓰잘때기 없는 기능들을 안써도 된다.</li>
</ul>

<h1 id="docker-">가상머신과 Docker의 컨테이너</h1>

<h4 id="section-1">가상머신</h4>
<ul>
  <li>가상머신은 완전한 컴퓨터라 항상 <em>게스트 OS</em>를 설치해야 한다. 그래서 이미지 안에 OS가 포함되기 때문에 이미지 용량이 커진다.</li>
  <li>게스트 OS는 넘나 무겁다. 전 가상화 방식의 느린 속도를 개선하기 위해 반 가상화를 내 놓았지만, 반 가상화라는것도 도찐개찐 무겁당.</li>
</ul>

<h4 id="docker">Docker</h4>
<ul>
  <li>Docker는 반 가상화보다 경량화된 방식. 게스트 OS를 설치하지 않음. Docker이미지에 서버 운영을 위한 프로그램과 라이브러리를 격리해서 설치할 수 있다.</li>
  <li>하드웨어를 가상화하는 계층(Hyper-V)이 없기 때문에 메모리 접근, 파일시스템, 네트워크 속도가 가상머신에 비해 월등히 빠름</li>
  <li>메인 호스트와 Docker의 컨테이너 사이의 계층과 성능차이는 크게 발생하지 않는다.</li>
</ul>

<h4 id="vs-docker-">가상머신 vs Docker 비교</h4>
<p><img src="http://patg.net/assets/container_vs_vm.jpg" alt="가상머신 vs Docker" /></p>

<h4 id="xen-hyper-v">반가상화(Xen, Hyper-V)</h4>
<p><img src="http://cfile24.uf.tistory.com/image/2514094E52693DA31D9518" alt="반 가상화" /></p>

<h4 id="chroot-jail">chroot와 jail</h4>
<ul>
  <li>chroot라는 명령을 이용한 방식. 파일 시스템에서 루트 디렉터리를 변경하는 명령</li>
  <li>chroot는 jail이라는 환경을 생성하는대 chroot jail안에서는 바깥의 파일과 디렉토리에 접근할 수 없다.</li>
  <li>chroot디렉토리 경로를 격리하기 때문에 서버정보의 유출과 피해를 최소화 하는데 주로 사용함</li>
  <li>chroot는 jail에 들어갈 실행파일과 공유라이브러리를 직접 준비해야하고 설정방법이 조금 복잡함.</li>
  <li>완벽한 가상머신이 아님</li>
  <li>이후 리눅스는 LXC(LinuX Container)라는 시스템 레벨의 가상화를 제공했다.
<img src="https://debcairn.files.wordpress.com/2014/08/chrooted_fig1.gif" alt="chroot에 대해 아라보쟈" /></li>
</ul>

<h4 id="linux-container-compose-of-cgroups-namespaces">리눅스 컨테이너-1 (LinuX Container compose of cgroups&amp; namespaces)</h4>
<ul>
  <li>LXC 는 컴퓨터를 통째로 가상화 하여 OS를 실행하는게 아닌 리눅스 커널레벨에서 제공하는 일종의 격리(isolate)된 가상의 공간.</li>
  <li>이 가상의 공간이 바로 컨테이너이다.</li>
  <li>리눅스 커널의 Control Groups(cgroups)는 CPU, 메모리, 디스크, 네트워크 자원을 할당하여 완전한 형태의 가상공간을 제공하게 됨</li>
  <li>프로세스 트리, 사용자 계졍, 파일 시스템, IPC등을 격리 시킨 호스트와 별개의 공간. 이를 Namespace Isolation(namespaces)라 부름</li>
  <li>LXC는 격리된 공간을 제공할 뿐, 서비스 운영에 필요한 기능이 부족했다.
<img src="https://image.slidesharecdn.com/lxcnextgenvirtualizationforcloud-introcloudexpo-140613044826-phpapp01/95/lxc-next-gen-virtualization-for-cloud-intro-cloudexpo-4-638.jpg?cb=1402634985" alt="LXC에 대해 알아보자" /></li>
</ul>

<h4 id="add-libcontainer">리눅스 컨테이너-2 (Add libcontainer)</h4>
<ul>
  <li>도커 초기에는 LXC를 기반으로 구현했지만 LXC 를 대신하는 libcontainer를 개발하여 사용하고 있다.</li>
  <li>내부적으로는 실행드라이버(exec driver)라 한다. 이게 도커</li>
  <li>libcontainer는 native 표시</li>
  <li>LXC는 lxc로 표시
<img src="https://cdn-images-1.medium.com/max/1200/1*E8KZJNl21-f1Fb93zgwPWA.jpeg" alt="libcontainer" />
<img src="http://www.publickey1.jp/blog/14/docker09.jpg" alt="냠냠 " /></li>
</ul>

<h1 id="section-2">이미지와 컨테이너의 차이</h1>

<h4 id="section-3">이미지</h4>
<ul>
  <li>리눅스 배포판의 유저랜드만 설치된 파일</li>
  <li>보통 리눅스 배포판 이름으로 되어있다.</li>
  <li>Redis나 Nginx등 설치된 베이스 이미지도 있다.</li>
  <li>즉, 필요한 라이브러리, 바이너리, 소스코드가 설치된 뒤 파일 하나로 묶인 것.</li>
  <li>이미지는 베이스 이미지, 애플리케이션(베이스 이미지가 사용된 것)으로 구분할 수 있다.</li>
  <li>실행할 때에는 베이스이미지에서 바뀐 부분(애플리케이션에서 변경된 부분)을 합쳐서 실행함.</li>
  <li>유저랜드 = 실행파일 + 라이브러리</li>
  <li>유저랜드 = 리눅스 부팅에 필요한 최소 실행파일과 라이브러리 조합(고유의 패키징 시스템을 포함)
<img src="https://image.slidesharecdn.com/webinarrealworlddocker2014-12-09v31-141209161210-conversion-gate01/95/realworld-docker-10-things-weve-learned-28-638.jpg?cb=1461786358" alt="updated base image " />
<img src="http://pyrasis.com/assets/images/DockerForTheReallyImpatientChapter01/10.png" alt="흑" />
<img src="https://i.stack.imgur.com/IsRzv.png" alt="Change and Update" />
##### 이미지 의존성
<img src="http://blog.kollus.com/wp-content/uploads/2015/10/docker_images.gif" alt="이미지 의존성" /></li>
</ul>

<h4 id="section-4">컨테이너</h4>
<ul>
  <li>이미지를 실행한 상태.</li>
  <li>이미지로 여러개의 컨테이너를 만들 수 있다.</li>
  <li>운영체제로 보면 이미지는 실행파일, 컨테이너는 프로세스</li>
  <li>즉, Docker는 특정 실행파일 또는 스크립트를 위한 실행 환경</li>
</ul>



        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->
        
            

            <section class="author">
                <h4><a href="/author/"></a></h4>

                
                <p>Read <a href="/author/">more posts</a> by this author.</p>
                
                <div class="author-meta">
                     
                    
                </div>
            </section> 
        
            <!-- /author  -->

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=(스터디) 도커.araboza - 1&amp;url=blog.drakejin.me%EC%8A%A4%ED%84%B0%EB%94%94-%EB%8F%84%EC%BB%A4-1"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=blog.drakejin.me%EC%8A%A4%ED%84%B0%EB%94%94-%EB%8F%84%EC%BB%A4-1"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=blog.drakejin.me%EC%8A%A4%ED%84%B0%EB%94%94-%EB%8F%84%EC%BB%A4-1"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
            
            <!-- Add Disqus Comments -->
            
<div id="disqus_thread"></div>

<!--
<script>
(function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');

    s.src = '//drake-jin-github-io/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


<div id="disqus_thread"></div>
-->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'drake-jin-github-io'; // required: replace example with your forum shortname
    var disqus_identifier = '/%EC%8A%A4%ED%84%B0%EB%94%94-%EB%8F%84%EC%BB%A4-1';
    var disqus_url = 'blog.drakejin.me/%EC%8A%A4%ED%84%B0%EB%94%94-%EB%8F%84%EC%BB%A4-1';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); 
        dsq.type = 'text/javascript'; 
        dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] 
         || 
         document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

            
        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story no-cover" href="/%EC%8A%A4%ED%84%B0%EB%94%94-%EB%8F%84%EC%BB%A4-2">
            <section class="post">
                <h2>(스터디) 도커.araboza - 2</h2>
                <p>[데이터 공작소] 데이터 공작소는 도커는 어떻게 공부할것인가! 처음 시작하는 도커에 대해 공부를 시작합니다. 이 문서의...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev no-cover" href="/%EC%8A%A4%ED%84%B0%EB%94%94-%EB%8F%84%EC%BB%A4-intro">
            <section class="post">
                <h2>(스터디) 도커.araboza - Intro</h2>
                <p>[데이터 공작소] 데이터 공작소는 도커는 어떻게 공부할것인가! 처음 시작하는 도커에 대해 공부를 시작합니다. 도커에 대해...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">데이터공작소</a> &copy; 2017</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-90708702-1', 'auto');
	    ga('send', 'pageview');

     </script>   
</body>
</html>
